<?php

class Kneipenart {
    private $id;
    private $name;

    public function __construct($id = null) {
        if ($id !== null) {
            $this->id = $id;
            $this->load();
        }
    }

    public function getId() {
        return $this->id;
    }

    public function getName() {
        return $this->name;
    }

    public static function getList() {
        $db = Database2::getInstance();
        $data = array();

        $q = $db->q(
            'SELECT kaid, typeName FROM %pkneipenarten
            ORDER BY typeName'
        );
        if ($q->hasData()) {
            foreach ($q->getData() as $v) {
                $data[] = new Kneipenart($v->kaid);
            }
        }

        return $data;
    }

    public function load() {
        $db = Database2::getInstance();
        $q = $db->q('SELECT * FROM %pkneipenarten WHERE kaid = %i', $this->id);

        if ($q->hasData()) {
            $this->id = $q->getFirst()->kaid;
            $this->name = $q->getFirst()->typeName;
        }

        return $q->hasData();
    }

    public function remove() {
        // Not implemented
    }
}

?>
